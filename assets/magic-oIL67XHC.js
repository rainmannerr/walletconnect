import{T as ar}from"./vendor-DTwBOZnz.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8a796cab-3252-4f36-b11d-b0968ef12747",e._sentryDebugIdIdentifier="sentry-dbid-8a796cab-3252-4f36-b11d-b0968ef12747")}catch{}})();var Ne=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(Ne||{}),De=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e.ProductAnnouncement="ANNOUNCEMENT",e))(De||{}),$t=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e))($t||{}),fe=(e=>(e.MetaMask="metamask",e.CoinbaseWallet="coinbase_wallet",e))(fe||{}),at=(e=>(e.WalletSelected="wallet_selected",e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e))(at||{}),C=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e.RevealPK="magic_reveal_key",e.EnableMFA="magic_auth_enable_mfa_flow",e.DisableMFA="magic_auth_disable_mfa_flow",e))(C||{}),Oe=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e.MAGIC_SEND_PRODUCT_ANNOUNCEMENT="MAGIC_SEND_PRODUCT_ANNOUNCEMENT",e.MAGIC_PONG="MAGIC_PONG",e))(Oe||{}),ct=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e.MAGIC_PING="MAGIC_PING",e))(ct||{}),Wn=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(Wn||{}),Vn=(e=>(e.Retry="retry",e))(Vn||{}),zn=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(zn||{}),he=(e=>(e.VerifyEmailOtp="verify-email-otp",e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.VerifyRecoveryCode="verify-recovery-code",e.Cancel="cancel",e))(he||{}),qe=(e=>(e.VerifySmsOtp="verify-sms-otp",e.Cancel="cancel",e.Retry="retry",e))(qe||{}),Hn=(e=>(e.SmsOTPSent="sms-otp-sent",e.InvalidSmsOtp="invalid-sms-otp",e.ExpiredSmsOtp="expired-sms-otp",e))(Hn||{}),Kn=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e.InvalidMfaOtp="invalid-mfa-otp",e.ExpiredEmailOtp="expired-email-otp",e.MfaSentHandle="mfa-sent-handle",e.RecoveryCodeSentHandle="recovery-code-sent-handle",e.InvalidRecoveryCode="invalid-recovery-code",e.RecoveryCodeSuccess="recovery-code-success",e))(Kn||{}),Mt=(e=>(e.Retry="device-retry",e))(Mt||{}),Xn=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(Xn||{}),pe=(e=>(e.Retry="Recency/auth-factor-retry",e.Cancel="Recency/auth-factor-verification-cancel",e.VerifyEmailOtp="Recency/auth-factor-verify-email-otp",e.VerifyMFACode="Recency/verify-mfa-code",e))(pe||{}),Yn=(e=>(e.PrimaryAuthFactorNeedsVerification="Recency/auth-factor-needs-verification",e.PrimaryAuthFactorVerified="Recency/auth-factor-verified",e.InvalidEmailOtp="Recency/auth-factor-invalid-email-otp",e.EmailExpired="Recency/auth-factor-verification-email-expired",e.EmailSent="Recency/auth-factor-verification-email-sent",e.EmailNotDeliverable="Recency/auth-factor-verification-email-not-deliverable",e))(Yn||{}),Ae=(e=>(e.RetryWithNewEmail="UpdateEmail/retry-with-new-email",e.Cancel="UpdateEmail/new-email-verification-cancel",e.VerifyEmailOtp="UpdateEmail/new-email-verify-otp",e))(Ae||{}),Jn=(e=>(e.NewAuthFactorNeedsVerification="UpdateEmail/new-email-needs-verification",e.EmailUpdated="UpdateEmail/email-updated",e.InvalidEmailOtp="UpdateEmail/new-email-invalid-email-otp",e.EmailExpired="UpdateEmail/new-email-verification-email-expired",e.EmailSent="UpdateEmail/new-email-verification-email-sent",e.EmailNotDeliverable="UpdateEmail/new-email-verification-email-not-deliverable",e.InvalidEmail="UpdateEmail/new-email-invalid",e.EmailAlreadyExists="UpdateEmail/new-email-already-exists",e))(Jn||{}),Qn=(e=>(e.IDTokenCreated="Auth/id-token-created",e))(Qn||{}),Zn=(e=>(e.SuccessSignIn="Farcaster/success_sign_in",e))(Zn||{}),ei=(e=>(e.MFASecretGenerated="mfa-secret-generated",e.InvalidMFAOtp="invalid-mfa-otp",e.MFARecoveryCodes="mfa-recovery-codes",e))(ei||{}),We=(e=>(e.VerifyMFACode="verify-mfa-code",e.Cancel="cancel-mfa-setup",e))(We||{}),ti=(e=>(e.MFACodeRequested="mfa-code-requested",e.InvalidMFAOtp="invalid-mfa-otp",e.InvalidRecoveryCode="invalid-recovery-code",e))(ti||{}),Re=(e=>(e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.Cancel="cancel-mfa-disable",e))(Re||{}),ri=(e=>(e.Harmony="HARMONY",e))(ri||{}),Or=(e=>(e.ClosedByUser="closed-by-user",e))(Or||{}),Nr=(e=>(e.ClosedByUser="closed-by-user-on-received",e))(Nr||{}),ni=(e=>(e.EnterNewPhoneNumber="enter-new-phone-number",e.EnterOtpCode="enter-otp-code",e.RecoveryFactorAlreadyExists="recovery-factor-already-exists",e.MalformedPhoneNumber="malformed-phone-number",e.InvalidOtpCode="invalid-otp-code",e))(ni||{}),me=(e=>(e.SendNewPhoneNumber="send-new-phone-number",e.SendOtpCode="send-otp-code",e.Cancel="cancel",e.StartEditPhoneNumber="start-edit-phone-number",e))(me||{}),ii=(e=>(e.PhoneNumber="phone_number",e))(ii||{}),oi=(e=>(e.Success="nft-checkout-success",e.Failure="nft-checkout-failure",e.Initiated="nft-checkout-initiated",e.Disconnect="disconnect",e))(oi||{}),ai=(e=>(e.WalletInfoFetched="Wallet/wallet-info-fetched",e))(ai||{}),si=(e=>(e.CloseMagicWindow="close-magic-window",e))(si||{}),Rt={},li=Object.create,pt=Object.defineProperty,ci=Object.defineProperties,ui=Object.getOwnPropertyDescriptor,di=Object.getOwnPropertyDescriptors,fi=Object.getOwnPropertyNames,sr=Object.getOwnPropertySymbols,hi=Object.getPrototypeOf,Sr=Object.prototype.hasOwnProperty,pi=Object.prototype.propertyIsEnumerable,lr=(e,t,r)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ct=(e,t)=>{for(var r in t||(t={}))Sr.call(t,r)&&lr(e,r,t[r]);if(sr)for(var r of sr(t))pi.call(t,r)&&lr(e,r,t[r]);return e},Lt=(e,t)=>ci(e,di(t)),vi=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mi=(e,t)=>{for(var r in t)pt(e,r,{get:t[r],enumerable:!0})},yi=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of fi(t))!Sr.call(e,l)&&l!==r&&pt(e,l,{get:()=>t[l],enumerable:!(i=ui(t,l))||i.enumerable});return e},gi=(e,t,r)=>(r=e!=null?li(hi(e)):{},yi(!e||!e.__esModule?pt(r,"default",{value:e,enumerable:!0}):r,e)),Y=(e,t,r)=>new Promise((i,l)=>{var o=y=>{try{f(r.next(y))}catch(g){l(g)}},h=y=>{try{f(r.throw(y))}catch(g){l(g)}},f=y=>y.done?i(y.value):Promise.resolve(y.value).then(o,h);f((r=r.apply(e,t)).next())}),Ei=vi((e,t)=>{var r=Object.prototype.hasOwnProperty,i="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(i=!1));function o(g,_,v){this.fn=g,this.context=_,this.once=v||!1}function h(g,_,v,N,L){if(typeof v!="function")throw new TypeError("The listener must be a function");var k=new o(v,N||g,L),F=i?i+_:_;return g._events[F]?g._events[F].fn?g._events[F]=[g._events[F],k]:g._events[F].push(k):(g._events[F]=k,g._eventsCount++),g}function f(g,_){--g._eventsCount===0?g._events=new l:delete g._events[_]}function y(){this._events=new l,this._eventsCount=0}y.prototype.eventNames=function(){var g=[],_,v;if(this._eventsCount===0)return g;for(v in _=this._events)r.call(_,v)&&g.push(i?v.slice(1):v);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(_)):g},y.prototype.listeners=function(g){var _=i?i+g:g,v=this._events[_];if(!v)return[];if(v.fn)return[v.fn];for(var N=0,L=v.length,k=new Array(L);N<L;N++)k[N]=v[N].fn;return k},y.prototype.listenerCount=function(g){var _=i?i+g:g,v=this._events[_];return v?v.fn?1:v.length:0},y.prototype.emit=function(g,_,v,N,L,k){var F=i?i+g:g;if(!this._events[F])return!1;var S=this._events[F],J=arguments.length,W,V;if(S.fn){switch(S.once&&this.removeListener(g,S.fn,void 0,!0),J){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,_),!0;case 3:return S.fn.call(S.context,_,v),!0;case 4:return S.fn.call(S.context,_,v,N),!0;case 5:return S.fn.call(S.context,_,v,N,L),!0;case 6:return S.fn.call(S.context,_,v,N,L,k),!0}for(V=1,W=new Array(J-1);V<J;V++)W[V-1]=arguments[V];S.fn.apply(S.context,W)}else{var ue=S.length,R;for(V=0;V<ue;V++)switch(S[V].once&&this.removeListener(g,S[V].fn,void 0,!0),J){case 1:S[V].fn.call(S[V].context);break;case 2:S[V].fn.call(S[V].context,_);break;case 3:S[V].fn.call(S[V].context,_,v);break;case 4:S[V].fn.call(S[V].context,_,v,N);break;default:if(!W)for(R=1,W=new Array(J-1);R<J;R++)W[R-1]=arguments[R];S[V].fn.apply(S[V].context,W)}}return!0},y.prototype.on=function(g,_,v){return h(this,g,_,v,!1)},y.prototype.once=function(g,_,v){return h(this,g,_,v,!0)},y.prototype.removeListener=function(g,_,v,N){var L=i?i+g:g;if(!this._events[L])return this;if(!_)return f(this,L),this;var k=this._events[L];if(k.fn)k.fn===_&&(!N||k.once)&&(!v||k.context===v)&&f(this,L);else{for(var F=0,S=[],J=k.length;F<J;F++)(k[F].fn!==_||N&&!k[F].once||v&&k[F].context!==v)&&S.push(k[F]);S.length?this._events[L]=S.length===1?S[0]:S:f(this,L)}return this},y.prototype.removeAllListeners=function(g){var _;return g?(_=i?i+g:g,this._events[_]&&f(this,_)):(this._events=new l,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=i,y.EventEmitter=y,typeof t<"u"&&(t.exports=y)});function _i(e){let t={exports:{}};return e(t,t.exports),t.exports}var Ii=Number.MAX_SAFE_INTEGER||9007199254740991,kt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Ii,MAX_SAFE_COMPONENT_LENGTH:16},bi=typeof process=="object"&&Rt&&Rt.NODE_DEBUG&&/\bsemver\b/i.test(Rt.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},q=bi,Ye=_i(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=kt,i=(t=e.exports={}).re=[],l=t.src=[],o=t.t={},h=0,f=(y,g,_)=>{let v=h++;q(v,g),o[y]=v,l[v]=g,i[v]=new RegExp(g,_?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${l[o.NUMERICIDENTIFIER]})\\.(${l[o.NUMERICIDENTIFIER]})\\.(${l[o.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[o.NUMERICIDENTIFIERLOOSE]})\\.(${l[o.NUMERICIDENTIFIERLOOSE]})\\.(${l[o.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[o.NUMERICIDENTIFIER]}|${l[o.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[o.NUMERICIDENTIFIERLOOSE]}|${l[o.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[o.PRERELEASEIDENTIFIER]}(?:\\.${l[o.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[o.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD",`(?:\\+(${l[o.BUILDIDENTIFIER]}(?:\\.${l[o.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[o.MAINVERSION]}${l[o.PRERELEASE]}?${l[o.BUILD]}?`),f("FULL",`^${l[o.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[o.MAINVERSIONLOOSE]}${l[o.PRERELEASELOOSE]}?${l[o.BUILD]}?`),f("LOOSE",`^${l[o.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[o.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[o.XRANGEIDENTIFIER]})(?:\\.(${l[o.XRANGEIDENTIFIER]})(?:\\.(${l[o.XRANGEIDENTIFIER]})(?:${l[o.PRERELEASE]})?${l[o.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[o.XRANGEIDENTIFIERLOOSE]})(?:${l[o.PRERELEASELOOSE]})?${l[o.BUILD]}?)?)?`),f("XRANGE",`^${l[o.GTLT]}\\s*${l[o.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[o.GTLT]}\\s*${l[o.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",l[o.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[o.LONETILDE]}${l[o.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[o.LONETILDE]}${l[o.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[o.LONECARET]}${l[o.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[o.LONECARET]}${l[o.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[o.GTLT]}\\s*(${l[o.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[o.GTLT]}\\s*(${l[o.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[o.GTLT]}\\s*(${l[o.LOOSEPLAIN]}|${l[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[o.XRANGEPLAIN]})\\s+-\\s+(${l[o.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[o.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0.0.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),cr=/^[0-9]+$/,Mr=(e,t)=>{let r=cr.test(e),i=cr.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},wi=(e,t)=>Mr(t,e),Ai={compareIdentifiers:Mr,rcompareIdentifiers:wi},{MAX_LENGTH:ur,MAX_SAFE_INTEGER:et}=kt,{re:dr,t:fr}=Ye,{compareIdentifiers:Ge}=Ai,ee=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>ur)throw new TypeError(`version is longer than ${ur} characters`);q("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?dr[fr.LOOSE]:dr[fr.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>et||this.major<0)throw new TypeError("Invalid major version");if(this.minor>et||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>et||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let l=+i;if(l>=0&&l<et)return l}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(q("SemVer.compare",this.version,this.options,e),!(e instanceof ee)){if(typeof e=="string"&&e===this.version)return 0;e=new ee(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ee||(e=new ee(e,this.options)),Ge(this.major,e.major)||Ge(this.minor,e.minor)||Ge(this.patch,e.patch)}comparePre(e){if(e instanceof ee||(e=new ee(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(q("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return Ge(r,i)}while(++t)}compareBuild(e){e instanceof ee||(e=new ee(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(q("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return Ge(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},Ri=(e,t,r)=>new ee(e,r).compare(new ee(t,r)),Ue=Ri,Oi=(e,t,r)=>Ue(e,t,r)===0,Ni=Oi,Si=(e,t,r)=>Ue(e,t,r)!==0,Mi=Si,Ti=(e,t,r)=>Ue(e,t,r)>0,$i=Ti,Ci=(e,t,r)=>Ue(e,t,r)>=0,Li=Ci,ki=(e,t,r)=>Ue(e,t,r)<0,Pi=ki,Di=(e,t,r)=>Ue(e,t,r)<=0,Ui=Di,ji=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Ni(e,r,i);case"!=":return Mi(e,r,i);case">":return $i(e,r,i);case">=":return Li(e,r,i);case"<":return Pi(e,r,i);case"<=":return Ui(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}},Ot=ji,Be=Symbol("SemVer ANY"),Ke=class{static get ANY(){return Be}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ke){if(e.loose===!!t.loose)return e;e=e.value}q("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Be?this.value="":this.value=this.operator+this.semver.version,q("comp",this)}parse(e){let t=this.options.loose?hr[pr.COMPARATORLOOSE]:hr[pr.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new ee(r[2],this.options.loose):this.semver=Be}toString(){return this.value}test(e){if(q("Comparator.test",e,this.options.loose),this.semver===Be||e===Be)return!0;if(typeof e=="string")try{e=new ee(e,this.options)}catch{return!1}return Ot(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Ke))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new ke(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new ke(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),i=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),l=this.semver.version===e.semver.version,o=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),h=Ot(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),f=Ot(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||l&&o||h||f}},{re:hr,t:pr}=Ye,ke=class{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof ke)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new ke(t.raw,r);if(t instanceof Ke)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let{loose:r}=this.options;t=t.trim();let i=r?ne[te.HYPHENRANGELOOSE]:ne[te.HYPHENRANGE];t=t.replace(i,Ji(this.options.includePrerelease)),q("hyphen replace",t),t=t.replace(ne[te.COMPARATORTRIM],xi),q("comparator trim",t,ne[te.COMPARATORTRIM]),t=(t=(t=t.replace(ne[te.TILDETRIM],Fi)).replace(ne[te.CARETTRIM],Gi)).split(/\s+/).join(" ");let l=r?ne[te.COMPARATORLOOSE]:ne[te.COMPARATOR];return t.split(" ").map(o=>Bi(o,this.options)).join(" ").split(/\s+/).map(o=>Yi(o,this.options)).filter(this.options.loose?o=>!!o.match(l):()=>!0).map(o=>new Ke(o,this.options))}intersects(t,r){if(!(t instanceof ke))throw new TypeError("a Range is required");return this.set.some(i=>vr(i,r)&&t.set.some(l=>vr(l,r)&&i.every(o=>l.every(h=>o.intersects(h,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new ee(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Qi(this.set[r],t,this.options))return!0;return!1}},{re:ne,t:te,comparatorTrimReplace:xi,tildeTrimReplace:Fi,caretTrimReplace:Gi}=Ye,vr=(e,t)=>{let r=!0,i=e.slice(),l=i.pop();for(;r&&i.length;)r=i.every(o=>l.intersects(o,t)),l=i.pop();return r},Bi=(e,t)=>(q("comp",e,t),e=Vi(e,t),q("caret",e),e=qi(e,t),q("tildes",e),e=Hi(e,t),q("xrange",e),e=Xi(e,t),q("stars",e),e),oe=e=>!e||e.toLowerCase()==="x"||e==="*",qi=(e,t)=>e.trim().split(/\s+/).map(r=>Wi(r,t)).join(" "),Wi=(e,t)=>{let r=t.loose?ne[te.TILDELOOSE]:ne[te.TILDE];return e.replace(r,(i,l,o,h,f)=>{let y;return q("tilde",e,i,l,o,h,f),oe(l)?y="":oe(o)?y=`>=${l}.0.0 <${+l+1}.0.0-0`:oe(h)?y=`>=${l}.${o}.0 <${l}.${+o+1}.0-0`:f?(q("replaceTilde pr",f),y=`>=${l}.${o}.${h}-${f} <${l}.${+o+1}.0-0`):y=`>=${l}.${o}.${h} <${l}.${+o+1}.0-0`,q("tilde return",y),y})},Vi=(e,t)=>e.trim().split(/\s+/).map(r=>zi(r,t)).join(" "),zi=(e,t)=>{q("caret",e,t);let r=t.loose?ne[te.CARETLOOSE]:ne[te.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(l,o,h,f,y)=>{let g;return q("caret",e,l,o,h,f,y),oe(o)?g="":oe(h)?g=`>=${o}.0.0${i} <${+o+1}.0.0-0`:oe(f)?g=o==="0"?`>=${o}.${h}.0${i} <${o}.${+h+1}.0-0`:`>=${o}.${h}.0${i} <${+o+1}.0.0-0`:y?(q("replaceCaret pr",y),g=o==="0"?h==="0"?`>=${o}.${h}.${f}-${y} <${o}.${h}.${+f+1}-0`:`>=${o}.${h}.${f}-${y} <${o}.${+h+1}.0-0`:`>=${o}.${h}.${f}-${y} <${+o+1}.0.0-0`):(q("no pr"),g=o==="0"?h==="0"?`>=${o}.${h}.${f}${i} <${o}.${h}.${+f+1}-0`:`>=${o}.${h}.${f}${i} <${o}.${+h+1}.0-0`:`>=${o}.${h}.${f} <${+o+1}.0.0-0`),q("caret return",g),g})},Hi=(e,t)=>(q("replaceXRanges",e,t),e.split(/\s+/).map(r=>Ki(r,t)).join(" ")),Ki=(e,t)=>{e=e.trim();let r=t.loose?ne[te.XRANGELOOSE]:ne[te.XRANGE];return e.replace(r,(i,l,o,h,f,y)=>{q("xRange",e,i,l,o,h,f,y);let g=oe(o),_=g||oe(h),v=_||oe(f),N=v;return l==="="&&N&&(l=""),y=t.includePrerelease?"-0":"",g?i=l===">"||l==="<"?"<0.0.0-0":"*":l&&N?(_&&(h=0),f=0,l===">"?(l=">=",_?(o=+o+1,h=0,f=0):(h=+h+1,f=0)):l==="<="&&(l="<",_?o=+o+1:h=+h+1),l==="<"&&(y="-0"),i=`${l+o}.${h}.${f}${y}`):_?i=`>=${o}.0.0${y} <${+o+1}.0.0-0`:v&&(i=`>=${o}.${h}.0${y} <${o}.${+h+1}.0-0`),q("xRange return",i),i})},Xi=(e,t)=>(q("replaceStars",e,t),e.trim().replace(ne[te.STAR],"")),Yi=(e,t)=>(q("replaceGTE0",e,t),e.trim().replace(ne[t.includePrerelease?te.GTE0PRE:te.GTE0],"")),Ji=e=>(t,r,i,l,o,h,f,y,g,_,v,N,L)=>`${r=oe(i)?"":oe(l)?`>=${i}.0.0${e?"-0":""}`:oe(o)?`>=${i}.${l}.0${e?"-0":""}`:h?`>=${r}`:`>=${r}${e?"-0":""}`} ${y=oe(g)?"":oe(_)?`<${+g+1}.0.0-0`:oe(v)?`<${g}.${+_+1}.0-0`:N?`<=${g}.${_}.${v}-${N}`:e?`<${g}.${_}.${+v+1}-0`:`<=${y}`}`.trim(),Qi=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(q(e[i].semver),e[i].semver!==Ke.ANY&&e[i].semver.prerelease.length>0){let l=e[i].semver;if(l.major===t.major&&l.minor===t.minor&&l.patch===t.patch)return!0}return!1}return!0},Zi=(e,t,r)=>{try{t=new ke(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:eo}=kt,{re:mr,t:yr}=Ye,to=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee)return e;if(typeof e!="string"||e.length>eo||!(t.loose?mr[yr.LOOSE]:mr[yr.FULL]).test(e))return null;try{return new ee(e,t)}catch{return null}},ro=to,{re:tt,t:rt}=Ye,no=(e,t)=>{if(e instanceof ee)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let i;for(;(i=tt[rt.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),tt[rt.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;tt[rt.COERCERTL].lastIndex=-1}else r=e.match(tt[rt.COERCE]);return r===null?null:ro(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function io(e){return String.fromCharCode(parseInt(e.slice(1),16))}function oo(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function ao(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,io))}function so(e){return decodeURIComponent(Array.from(atob(e),oo).join(""))}function Tr(e){return ao(JSON.stringify(e))}function lo(e){return JSON.parse(so(e))}function Ve(e){return typeof e>"u"}function co(e){return e===null}function $r(e){return co(e)||Ve(e)}function uo(e){return $r(e)?!1:!Ve(e.jsonrpc)&&!Ve(e.id)&&(!Ve(e.result)||!Ve(e.error))}function fo(e){return $r(e)?!1:typeof e=="number"&&Object.values($t).includes(e)}function ut(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var H={};function ho(e,t){return Object.assign(H,t),e}var po={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},Se=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,Se.prototype)}},dt=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=fo(t)?t:$t.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,dt.prototype)}},Je=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},Cr=class extends Error{constructor(e,t,r,i){super(`Magic Extension Error (${e.name}): [${t}] ${r}`),this.code=t,this.rawMessage=r,this.data=i,this.__proto__=Error,Object.setPrototypeOf(this,Cr.prototype)}},gr=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function vo(){return new Se(Ne.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Lr(){return new Se(Ne.ModalNotReady,"Modal is not ready.")}function mo(){return new Se(Ne.MalformedResponse,"Response from the Magic iframe is malformed.")}function yo(e){return new Se(Ne.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function go(e){let t=`Some extensions are incompatible with \`${H.sdkName}@${H.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let i=r.compat[H.sdkName];typeof i=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${i}\``:i||(t+=`
  - Extension \`${r.name}\` does not support ${H.platform} environments.`)}),new Se(Ne.IncompatibleExtensions,t)}function Eo(e){let t=r=>{let i=r+1,l=i%10,o=i%100;return l===1&&o!==11?`${i}st`:l===2&&o!==12?`${i}nd`:l===3&&o!==13?`${i}rd`:`${i}th`};return new Se(Ne.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function _o(){return new Je(De.DuplicateIframe,"Duplicate iframes found.")}function Io(){return new Je(De.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function bo(){return new Je(De.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${H.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function ze(e){let{method:t,removalVersions:r,useInstead:i}=e,l=r[H.sdkName],o=i?` Use \`${i}\` instead.`:"",h=`\`${t}\` will be removed from \`${H.sdkName}\` in version \`${l}\`.${o}`;return new Je(De.DeprecationNotice,h)}function*wo(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var Ao=wo();function kr(){return Ao.next().value}var Pr=Symbol("Payload pre-processed by Magic SDK");function Dr(e){return Object.defineProperty(e,Pr,{value:!0,enumerable:!1}),e}function Ro(e){return!!e[Pr]}function ft(e){var t,r,i;return Ro(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=kr(),e.method=(r=e.method)!=null?r:"noop",e.params=(i=e.params)!=null?i:[],Dr(e)),e}function U(e,t=[]){return Dr({params:t,method:e,jsonrpc:"2.0",id:kr()})}var Pt=class{constructor(e){e instanceof Pt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):uo(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Oo=gi(Ei()),No=class extends Oo.default{};function Ur(){let e=new No;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...i)=>(e[t].apply(e,i),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var jr=Symbol("isPromiEvent");function So(e){return!!e[jr]}function Xe(e){let t=xr(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:i}=Ur(),l=Symbol("Promise.then"),o=Symbol("Promise.catch"),h=Symbol("Promise.finally"),f=(_,v)=>(...N)=>{let L=v[_].apply(v,N);return y(L)},y=_=>Object.assign(_,{[jr]:!0,[l]:_[l]||_.then,[o]:_[o]||_.catch,[h]:_[h]||_.finally,then:f(l,_),catch:f(o,_),finally:f(h,_),on:i("on",_),once:i("once",_),addListener:i("addListener",_),off:i("off",_),removeListener:i("removeListener",_),removeAllListeners:i("removeAllListeners",_),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),g=y(t.then(_=>(g.emit("done",_),g.emit("settled"),_),_=>{throw g.emit("error",_),g.emit("settled"),_}));return g.on(Nr.ClosedByUser,()=>{g.emit(Or.ClosedByUser)}),g}function xr(e){return new Promise((t,r)=>{let i=e(t,r);Promise.resolve(i).catch(r)})}var Me=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(ct.MAGIC_HANDLE_REQUEST,ft(e)),r=Xe((l,o)=>{t.then(h=>{if(i(),h.hasError)o(new dt(h.payload.error));else if(h.hasResult)l(h.payload.result);else throw mo()}).catch(h=>{i(),o(h)})}),i=this.overlay.on(Oe.MAGIC_HANDLE_EVENT,l=>{var o;let{response:h}=l.data;if(h.id===e.id&&((o=h.result)!=null&&o.event)){let{event:f,params:y=[]}=h.result;r.emit(f,...y)}});return r}createIntermediaryEvent(e,t){return r=>{let i=U(C.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(i)}}};function Mo(e,t){let[r]=e.split(".").map(Number);return r>=t}var He={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},To=class extends Me{loginWithMagicLink(e){let t=H.sdkName==="@magic-sdk/react-native"||H.sdkName==="@magic-sdk/react-native-bare"||H.sdkName==="@magic-sdk/react-native-expo";if(t&&Mo(H.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");t&&ze({method:"auth.loginWithMagicLink()",removalVersions:He,useInstead:"auth.loginWithEmailOTP()"}).log();let{email:r,showUI:i=!0,redirectURI:l,overrides:o,lifespan:h}=e,f=U(this.sdk.testMode?C.LoginWithMagicLinkTestMode:C.LoginWithMagicLink,[{email:r,showUI:i,redirectURI:l,overrides:o,lifespan:h}]);return this.request(f)}loginWithSMS(e){let{phoneNumber:t,showUI:r=!0,lifespan:i}=e,l=U(this.sdk.testMode?C.LoginWithSmsTestMode:C.LoginWithSms,[{phoneNumber:t,showUI:r,lifespan:i}]),o=this.request(l);return!r&&o&&(o.on(qe.VerifySmsOtp,h=>{this.createIntermediaryEvent(qe.VerifySmsOtp,l.id)(h)}),o.on(qe.Cancel,()=>{this.createIntermediaryEvent(qe.Cancel,l.id)()})),o}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:i,overrides:l,lifespan:o}=e,h=U(this.sdk.testMode?C.LoginWithEmailOTPTestMode:C.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:i,overrides:l,lifespan:o}]),f=this.request(h);return!i&&f&&f.on(Mt.Retry,()=>{this.createIntermediaryEvent(Mt.Retry,h.id)()}),!r&&f&&(f.on(he.VerifyEmailOtp,y=>{this.createIntermediaryEvent(he.VerifyEmailOtp,h.id)(y)}),f.on(he.VerifyMFACode,y=>{this.createIntermediaryEvent(he.VerifyMFACode,h.id)(y)}),f.on(he.LostDevice,()=>{this.createIntermediaryEvent(he.LostDevice,h.id)()}),f.on(he.VerifyRecoveryCode,y=>{this.createIntermediaryEvent(he.VerifyRecoveryCode,h.id)(y)}),f.on(he.Cancel,()=>{this.createIntermediaryEvent(he.Cancel,h.id)()})),f}loginWithCredential(e){let{credentialOrQueryString:t,lifespan:r}=e||{},i=t??"";if(!t&&H.platform==="web"){i=window.location.search;let o=window.location.origin+window.location.pathname;window.history.replaceState(null,"",o)}let l=U(this.sdk.testMode?C.LoginWithCredentialTestMode:C.LoginWithCredential,[i,r]);return this.request(l)}setAuthorizationToken(e){let t=U(C.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){let{email:t,showUI:r=!0}=e,i=U(this.sdk.testMode?C.UpdateEmailTestMode:C.UpdateEmail,[{email:t,showUI:r}]),l=this.request(i);return r||(l.on(pe.Retry,()=>{this.createIntermediaryEvent(pe.Retry,i.id)()}),l.on(pe.Cancel,()=>{this.createIntermediaryEvent(pe.Cancel,i.id)()}),l.on(pe.VerifyEmailOtp,o=>{this.createIntermediaryEvent(pe.VerifyEmailOtp,i.id)(o)}),l.on(pe.VerifyMFACode,o=>{this.createIntermediaryEvent(pe.VerifyMFACode,i.id)(o)}),l.on(Ae.RetryWithNewEmail,o=>{this.createIntermediaryEvent(Ae.RetryWithNewEmail,i.id)(o)}),l.on(Ae.Cancel,()=>{this.createIntermediaryEvent(Ae.Cancel,i.id)()}),l.on(Ae.VerifyEmailOtp,o=>{this.createIntermediaryEvent(Ae.VerifyEmailOtp,i.id)(o)})),l}},Fr={};mi(Fr,{clear:()=>$o,getItem:()=>ae,iterate:()=>Gr,key:()=>Lo,keys:()=>ko,length:()=>Co,removeItem:()=>Pe,setItem:()=>ve});var nt;function Ie(e){return(...t)=>Y(this,null,function*(){return nt||(nt=yield H.configureStorage()),yield nt.ready(),nt[e](...t)})}var ae=Ie("getItem"),ve=Ie("setItem"),Pe=Ie("removeItem"),$o=Ie("clear"),Co=Ie("length"),Lo=Ie("key"),ko=Ie("keys"),Gr=Ie("iterate");function Po(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var Br="STORE_KEY_PRIVATE_KEY",Tt="STORE_KEY_PUBLIC_JWK",qr="ECDSA",Do="P-256",Uo={name:qr,namedCurve:Do};function vt(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function jo(){return Y(this,null,function*(){let e=yield xo();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield ae(Br);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let i={iat:Math.floor(new Date().getTime()/1e3),jti:Po()},l={typ:"dpop+jwt",alg:"ES256",jwk:e},o={protected:Er(JSON.stringify(l)),claims:Er(JSON.stringify(i))},h=Go(`${o.protected}.${o.claims}`),f={name:qr,hash:{name:"SHA-256"}},y=qo(new Uint8Array(yield t.sign(f,r,h)));return`${o.protected}.${o.claims}.${y}`})}function xo(){return Y(this,null,function*(){if(!vt()){console.info("webcrypto is not supported");return}return(yield ae(Tt))||(yield Fo()),ae(Tt)})}function Fo(){return Y(this,null,function*(){let{subtle:e}=window.crypto,t=yield e.generateKey(Uo,!1,["sign"]),r=yield e.exportKey("jwk",t.publicKey);yield ve(Br,t.privateKey),yield ve(Tt,r)})}function Er(e){return Wr(Bo(e))}function Go(e){return new TextEncoder().encode(e)}function Wr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function Bo(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function qo(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),Wr(t)}var Dt="ds",Ut="ek",jt="iv",xt="AES-GCM",Wo=256;function Ft(){return Y(this,null,function*(){let e=[];yield Gr((t,r,i)=>{r.startsWith(`${Dt}_`)&&e.push(r)});for(let t of e)yield Pe(t)})}function Vr(e){let t="",r=new Uint8Array(e),i=r.byteLength;for(let l=0;l<i;l++)t+=String.fromCharCode(r[l]);return window.btoa(t)}function zr(e){let t=window.atob(e),r=t.length,i=new Uint8Array(r);for(let l=0;l<r;l++)i[l]=t.charCodeAt(l);return i.buffer}function Vo(){return Y(this,null,function*(){if(!vt()){console.info("webcrypto is not supported");return}let{crypto:e}=window;return(yield ae(jt))||e.getRandomValues(new Uint8Array(12))})}function zo(){return Y(this,null,function*(){if(!vt()){console.info("webcrypto is not supported");return}let{subtle:e}=window.crypto;return(yield ae(Ut))||(yield e.generateKey({name:xt,length:Wo},!1,["encrypt","decrypt"]))})}function Ho(e,t){return Y(this,null,function*(){let r=yield Vo(),i=yield zo();if(!r||!i||!e)return;let l=zr(e),{subtle:o}=window.crypto,h=yield o.encrypt({name:xt,iv:r},i,l),f=Vr(h);yield ve(`${Dt}_${t}`,f),yield ve(Ut,i),yield ve(jt,r)})}function Ko(e){return Y(this,null,function*(){let t=yield ae(`${Dt}_${e}`),r=yield ae(jt),i=yield ae(Ut);if(!r||!t||!i||!vt())return;let{subtle:l}=window.crypto,o=yield l.decrypt({name:xt,iv:r},i,zr(t));return Vr(o)})}function ht(e,t){return t?new URL(e,t):new URL(e)}var Xo=class extends Me{constructor(){super(...arguments),this.localForageKey="mc_active_wallet",this.localForageIsLoggedInKey="magic_auth_is_logged_in",this.userLoggedOutCallbacks=[]}getIdToken(e){let t=U(this.sdk.testMode?C.GetIdTokenTestMode:C.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=U(this.sdk.testMode?C.GenerateIdTokenTestMode:C.GenerateIdToken,[e]);return this.request(t)}getInfo(){return Y(this,null,function*(){let e=yield ae(this.localForageKey),t=U(C.GetInfo,[{walletType:e}]);return this.request(t)})}isLoggedIn(){return Xe((e,t)=>Y(this,null,function*(){try{let r=!1;this.sdk.useStorageCache&&(r=(yield ae(this.localForageIsLoggedInKey))==="true",r&&e(!0));let i=U(this.sdk.testMode?C.IsLoggedInTestMode:C.IsLoggedIn),l=yield this.request(i);this.sdk.useStorageCache&&(l?ve(this.localForageIsLoggedInKey,!0):Pe(this.localForageIsLoggedInKey),r&&!l&&this.emitUserLoggedOut(!0)),e(l)}catch(r){t(r)}}))}logout(){return Pe(this.localForageKey),Pe(this.localForageIsLoggedInKey),Ft(),Xe((e,t)=>Y(this,null,function*(){try{let r=U(this.sdk.testMode?C.LogoutTestMode:C.Logout),i=yield this.request(r);this.sdk.useStorageCache&&this.emitUserLoggedOut(i),e(i)}catch(r){t(r)}}))}requestInfoWithUI(e){let t=U(C.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let{showUI:t=!0}=e||{},r=U(this.sdk.testMode?C.UserSettingsTestMode:C.UserSettings,[e]),i=this.request(r);return!t&&i&&(i.on(me.SendNewPhoneNumber,l=>{this.createIntermediaryEvent(me.SendNewPhoneNumber,r.id)(l)}),i.on(me.SendOtpCode,l=>{this.createIntermediaryEvent(me.SendOtpCode,r.id)(l)}),i.on(me.StartEditPhoneNumber,()=>{this.createIntermediaryEvent(me.StartEditPhoneNumber,r.id)()}),i.on(me.Cancel,()=>{this.createIntermediaryEvent(me.Cancel,r.id)()}),i.on(pe.VerifyEmailOtp,l=>{this.createIntermediaryEvent(pe.VerifyEmailOtp,r.id)(l)})),i}recoverAccount(e){let t=U(this.sdk.testMode?C.RecoverAccountTestMode:C.RecoverAccount,[e]);return this.request(t)}revealPrivateKey(){let e=U(C.RevealPK);return this.request(e)}getMetadata(){ze({method:"user.getMetadata()",removalVersions:He,useInstead:"user.getInfo()"}).log();let e=U(this.sdk.testMode?C.GetMetadataTestMode:C.GetMetadata);return this.request(e)}onUserLoggedOut(e){this.userLoggedOutCallbacks.push(e)}enableMFA(e){let{showUI:t=!0}=e,r=U(C.EnableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on(We.VerifyMFACode,l=>{this.createIntermediaryEvent(We.VerifyMFACode,r.id)(l)}),i.on(We.Cancel,()=>{this.createIntermediaryEvent(We.Cancel,r.id)()})),i}disableMFA(e){let{showUI:t=!0}=e,r=U(C.DisableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on(Re.VerifyMFACode,l=>{this.createIntermediaryEvent(Re.VerifyMFACode,r.id)(l)}),i.on(Re.LostDevice,l=>{this.createIntermediaryEvent(Re.LostDevice,r.id)(l)}),i.on(Re.Cancel,()=>{this.createIntermediaryEvent(Re.Cancel,r.id)()})),i}emitUserLoggedOut(e){this.userLoggedOutCallbacks.forEach(t=>{t(e)})}},Yo=class extends Me{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){let e=Xe((t,r)=>Y(this,null,function*(){try{if(this.isMetaMaskBrowser()&&(yield this.isWalletEnabled(fe.MetaMask))){let f=yield this.autoConnectIfWalletBrowser(fe.MetaMask);t(f);return}if(this.isCoinbaseWalletBrowser()&&(yield this.isWalletEnabled(fe.CoinbaseWallet))){let f=yield this.autoConnectIfWalletBrowser(fe.CoinbaseWallet);t(f);return}let i=this.getUserEnv(),l=U(C.Login,[i]),o=this.request(l);o.on(at.WalletSelected,f=>this.handleWalletSelected(Lt(Ct({},f),{payloadId:l.id}))),o.on("id-token-created",f=>{e.emit("id-token-created",f)});let h=yield o;h.error&&r(h),t(h)}catch(i){r(i)}}));return e}showUI(e){return this.request(U(C.ShowUI,[e]))}showAddress(){return this.request(U(C.ShowAddress))}showSendTokensUI(){return this.request(U(C.ShowSendTokensUI))}showOnRamp(){return this.request(U(C.ShowOnRamp))}showNFTs(){return this.request(U(C.ShowNFTs))}showBalances(){return this.request(U(C.ShowBalances))}sendGaslessTransaction(e,t){return this.request(U(C.SendGaslessTransaction,[e,t]))}getInfo(){return Y(this,null,function*(){ze({method:"wallet.getInfo()",removalVersions:He,useInstead:"user.getInfo()"}).log();let e=yield ae(this.localForageKey),t=U(C.GetInfo,[{walletType:e}]);return this.request(t)})}disconnect(){ze({method:"wallet.disconnect()",removalVersions:He,useInstead:"user.logout()"}).log(),Pe(this.localForageKey),Ft();let e=U(C.Disconnect);return this.request(e)}requestUserInfoWithUI(e){ze({method:"wallet.requestUserInfoWithUI()",removalVersions:He,useInstead:"user.requestUserInfoWithUI()"}).log();let t=U(C.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}getProvider(){return Y(this,null,function*(){switch(yield ae(this.localForageKey)){case fe.MetaMask:return this.getMetaMaskProvider();case fe.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isMetaMask)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(i=>i==null?void 0:i.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isCoinbaseWallet)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(i=>i==null?void 0:i.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!!((e=window.ethereum)!=null&&e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case fe.MetaMask:return this.connectToMetaMask();case fe.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let t=U("mc_is_wallet_enabled",[{wallet:e}]);return this.request(t)}handleWalletSelected(e){return Y(this,null,function*(){try{let t=yield this.connectToThirdPartyWallet(e.wallet);yield ve(this.localForageKey,e.wallet),this.createIntermediaryEvent(at.WalletConnected,e.payloadId)(t)}catch(t){console.error(t),this.createIntermediaryEvent(at.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return Y(this,null,function*(){let t;e===fe.MetaMask&&(t=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===fe.CoinbaseWallet&&(t=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield ve(this.localForageKey,e);let r=U(C.AutoConnect,[{wallet:e,address:t}]);return this.request(r)})}},{createBoundEmitterMethod:it,createChainingEmitterMethod:Le}=Ur(),Jo=class extends Me{constructor(){super(...arguments),this.isMagic=!0,this.on=Le("on",this),this.once=Le("once",this),this.addListener=Le("addListener",this),this.off=Le("off",this),this.removeListener=Le("removeListener",this),this.removeAllListeners=Le("removeAllListeners",this),this.emit=it("emit"),this.eventNames=it("eventNames"),this.listeners=it("listeners"),this.listenerCount=it("listenerCount")}sendAsync(e,t){if(!t)throw Eo({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(ct.MAGIC_HANDLE_REQUEST,e.map(r=>{let i=ft(r);return this.prefixPayloadMethodForTestMode(i),i})).then(r=>{t(null,r.map(i=>Lt(Ct({},i.payload),{error:i.hasError?new dt(i.payload.error):null})))});else{let r=ft(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(ct.MAGIC_HANDLE_REQUEST,r).then(i=>{t(i.hasError?new dt(i.payload.error):null,i.payload)})}}send(e,t){if(typeof e=="string"){let i=U(e,Array.isArray(t)?t:[]);return this.request(i)}if(Array.isArray(e)||t){this.sendAsync(e,t);return}let r=Io();return r.log(),new Pt(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=U(C.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}},_r=["request","overlay","sdk"];function Qo(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==Me.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var Hr=class extends Me{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Xe,isPromiEvent:So,encodeJSON:Tr,decodeJSON:lo,createJsonRpcRequestPayload:U,standardizeJsonRpcRequestPayload:ft,storage:Fr};let e=[this,...Qo(this)];_r.forEach(t=>{let r=e.map(h=>Object.getOwnPropertyDescriptor(h,t)),i=r.findIndex(h=>!!h),l=i>0,o=r[i];o&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:o,isPrototypeField:l}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw yo(t)}}))})}init(e){this.__is_initialized__||(_r.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:i}=this.__sdk_access_field_descriptors__.get(t);i?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:i}=e,l=i?` Use \`${i}\` instead.`:"",o=`\`${t}\` will be removed from this Extension in version \`${r}\`.${l}`;return new gr(this,"DEPRECATION_NOTICE",o)}createWarning(e,t){return new gr(this,e,t)}createError(e,t,r){return new Cr(this,e,t,r)}},Zo=class extends Hr{},_e=class extends Hr{};_e.Internal=Zo,_e.Anonymous="anonymous extension";var ea=class extends Me{purchase(t){let r=U(C.NFTPurchase,[t]);return this.request(r)}checkout(t){let r=U(C.NFTCheckout,[t]);return this.request(r)}transfer(t){let r=U(C.NFTTransfer,[t]);return this.request(r)}};function Ir(e){return e.compat&&e.compat[H.sdkName]!=null?typeof e.compat[H.sdkName]=="string"?Zi(no(H.version),e.compat[H.sdkName]):!!e.compat[H.sdkName]:!0}function ta(e,t,r){return!t&&!r?`${e}_eth_mainnet`:r?`${e}_${JSON.stringify(r)}`:t?typeof t=="string"?`${e}_eth_${t}`:`${e}_${t.rpcUrl}_${t.chainId}_${t.chainType}`:`${e}_unknown`}function ra(e){var t;let r=(t=e==null?void 0:e.extensions)!=null?t:[],i={},l=[];if(Array.isArray(r)?r.forEach(o=>{Ir(o)?(o.init(this),(o.name||o.name!==_e.Anonymous)&&(this[o.name]=o),o instanceof _e.Internal&&(ut(o.config)||(i[o.name]=o.config))):l.push(o)}):Object.keys(r).forEach(o=>{if(Ir(r[o])){r[o].init(this);let h=r[o];this[o]=h,h instanceof _e.Internal&&(ut(h.config)||(i[r[o].name]=h.config))}else l.push(r[o])}),l.length)throw go(l);return i}var st=class{constructor(e,t){this.apiKey=e;var r;if(!e)throw vo();H.platform==="react-native"&&(t!=null&&t.endpoint)&&bo().log();let{defaultEndpoint:i,version:l}=H;this.testMode=!!(t!=null&&t.testMode),this.useStorageCache=!!(t!=null&&t.useStorageCache),this.endpoint=ht((r=t==null?void 0:t.endpoint)!=null?r:i).origin,this.auth=new To(this),this.user=new Xo(this),this.wallet=new Yo(this),this.nft=new ea(this),this.rpcProvider=new Jo(this);let o=ra.call(this,t);this.parameters=Tr(Lt(Ct({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:ht(this.endpoint).host,sdk:po[H.sdkName],version:l,ext:ut(o)?void 0:o,locale:(t==null?void 0:t.locale)||"en_US"},H.bundleId?{bundleId:H.bundleId}:{}),{meta:t==null?void 0:t.meta})),this.networkHash=ta(this.apiKey,t==null?void 0:t.network,ut(o)?void 0:o),t!=null&&t.deferPreload||this.preload()}get overlay(){if(!st.__overlays__.has(this.parameters)){let e=new H.ViewController(this.endpoint,this.parameters,this.networkHash);e.init(),st.__overlays__.set(this.parameters,e)}return st.__overlays__.get(this.parameters)}preload(){return Y(this,null,function*(){yield this.overlay.checkIsReadyForRequest})}},Kr=st;Kr.__overlays__=new Map;function na(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function ia(e,t){var r;let i=(r=t.data.response)==null?void 0:r.id,l=na(e,i);if(i&&l){let o=new Pt(l).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:i,response:o}}return{}}function oa(e,t,r){return Y(this,null,function*(){var i;let l=yield ae("rt"),o;if(H.platform==="web")try{o=(i=yield ae("jwt"))!=null?i:yield jo()}catch(y){console.error("webcrypto error",y)}let h={msgType:e,payload:t};o&&(h.jwt=o),o&&l&&(h.rt=l);let f=yield Ko(r);return f&&(h.deviceShare=f),h})}function aa(e){return Y(this,null,function*(){!e.data.rt||(yield ve("rt",e.data.rt))})}var sa=class{constructor(e,t,r){this.endpoint=e,this.parameters=t,this.networkHash=r,this.messageHandlers=new Set,this.isConnectedToInternet=!0,this.checkIsReadyForRequest=this.waitForReady(),this.isReadyForRequest=!1,this.listen()}post(e,t){return Y(this,null,function*(){return xr((r,i)=>Y(this,null,function*(){if(!this.isConnectedToInternet){let g=Lr();i(g)}this.isReadyForRequest||(yield this.waitForReady());let l=[],o=Array.isArray(t)?t.map(g=>g.id):[],h=yield oa(`${e}-${this.parameters}`,t,this.networkHash);yield this._post(h);let f=g=>_=>{var v;let{id:N,response:L}=ia(t,_);if(aa(_),((v=L==null?void 0:L.payload.error)==null?void 0:v.message)==="User denied account access.")Ft();else if(_.data.deviceShare){let{deviceShare:k}=_.data;Ho(k,this.networkHash)}N&&L&&Array.isArray(t)&&o.includes(N)?(l.push(L),l.length===t.length&&(g(),r(l))):N&&L&&!Array.isArray(t)&&N===t.id&&(g(),r(L))},y=this.on(Oe.MAGIC_HANDLE_RESPONSE,f(()=>y()))}))})}on(e,t){let r=t.bind(window),i=l=>{l.data.msgType===`${e}-${this.parameters}`&&r(l)};return this.messageHandlers.add(i),()=>this.messageHandlers.delete(i)}waitForReady(){return new Promise(e=>{let t=this.on(Oe.MAGIC_OVERLAY_READY,()=>{this.isReadyForRequest=!0,e(),t()});setTimeout(()=>{this.isReadyForRequest=!0,e(),t()},15e3)})}listen(){this.on(Oe.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(Oe.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()}),this.on(Oe.MAGIC_SEND_PRODUCT_ANNOUNCEMENT,e=>{e.data.response.result.product_announcement&&new Je(De.ProductAnnouncement,e.data.response.result.product_announcement).log()})}},la=Object.create,Xr=Object.defineProperty,ca=Object.getOwnPropertyDescriptor,ua=Object.getOwnPropertyNames,da=Object.getPrototypeOf,fa=Object.prototype.hasOwnProperty,ot=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Yr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ha=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of ua(t))!fa.call(e,l)&&l!==r&&Xr(e,l,{get:()=>t[l],enumerable:!(i=ca(t,l))||i.enumerable});return e},Jr=(e,t,r)=>(r=e!=null?la(da(e)):{},ha(!e||!e.__esModule?Xr(r,"default",{value:e,enumerable:!0}):r,e)),lt=(e,t,r)=>new Promise((i,l)=>{var o=y=>{try{f(r.next(y))}catch(g){l(g)}},h=y=>{try{f(r.throw(y))}catch(g){l(g)}},f=y=>y.done?i(y.value):Promise.resolve(y.value).then(o,h);f((r=r.apply(e,t)).next())}),pa=Yr((e,t)=>{(function(r){if(typeof e=="object"&&typeof t<"u")t.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var i;typeof window<"u"?i=window:typeof global<"u"?i=global:typeof self<"u"?i=self:i=this,i.localforage=r()}})(function(){return function r(i,l,o){function h(g,_){if(!l[g]){if(!i[g]){var v=typeof ot=="function"&&ot;if(!_&&v)return v(g,!0);if(f)return f(g,!0);var N=new Error("Cannot find module '"+g+"'");throw N.code="MODULE_NOT_FOUND",N}var L=l[g]={exports:{}};i[g][0].call(L.exports,function(k){var F=i[g][1][k];return h(F||k)},L,L.exports,r,i,l,o)}return l[g].exports}for(var f=typeof ot=="function"&&ot,y=0;y<o.length;y++)h(o[y]);return h}({1:[function(r,i,l){(function(o){var h=o.MutationObserver||o.WebKitMutationObserver,f;if(h){var y=0,g=new h(k),_=o.document.createTextNode("");g.observe(_,{characterData:!0}),f=function(){_.data=y=++y%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var v=new o.MessageChannel;v.port1.onmessage=k,f=function(){v.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?f=function(){var S=o.document.createElement("script");S.onreadystatechange=function(){k(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},o.document.documentElement.appendChild(S)}:f=function(){setTimeout(k,0)};var N,L=[];function k(){N=!0;for(var S,J,W=L.length;W;){for(J=L,L=[],S=-1;++S<W;)J[S]();W=L.length}N=!1}i.exports=F;function F(S){L.push(S)===1&&!N&&f()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,i,l){var o=r(1);function h(){}var f={},y=["REJECTED"],g=["FULFILLED"],_=["PENDING"];i.exports=v;function v(R){if(typeof R!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,R!==h&&F(this,R)}v.prototype.catch=function(R){return this.then(null,R)},v.prototype.then=function(R,x){if(typeof R!="function"&&this.state===g||typeof x!="function"&&this.state===y)return this;var D=new this.constructor(h);if(this.state!==_){var G=this.state===g?R:x;L(D,G,this.outcome)}else this.queue.push(new N(D,R,x));return D};function N(R,x,D){this.promise=R,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}N.prototype.callFulfilled=function(R){f.resolve(this.promise,R)},N.prototype.otherCallFulfilled=function(R){L(this.promise,this.onFulfilled,R)},N.prototype.callRejected=function(R){f.reject(this.promise,R)},N.prototype.otherCallRejected=function(R){L(this.promise,this.onRejected,R)};function L(R,x,D){o(function(){var G;try{G=x(D)}catch(Z){return f.reject(R,Z)}G===R?f.reject(R,new TypeError("Cannot resolve promise with itself")):f.resolve(R,G)})}f.resolve=function(R,x){var D=S(k,x);if(D.status==="error")return f.reject(R,D.value);var G=D.value;if(G)F(R,G);else{R.state=g,R.outcome=x;for(var Z=-1,ie=R.queue.length;++Z<ie;)R.queue[Z].callFulfilled(x)}return R},f.reject=function(R,x){R.state=y,R.outcome=x;for(var D=-1,G=R.queue.length;++D<G;)R.queue[D].callRejected(x);return R};function k(R){var x=R&&R.then;if(R&&(typeof R=="object"||typeof R=="function")&&typeof x=="function")return function(){x.apply(R,arguments)}}function F(R,x){var D=!1;function G(le){D||(D=!0,f.reject(R,le))}function Z(le){D||(D=!0,f.resolve(R,le))}function ie(){x(Z,G)}var se=S(ie);se.status==="error"&&G(se.value)}function S(R,x){var D={};try{D.value=R(x),D.status="success"}catch(G){D.status="error",D.value=G}return D}v.resolve=J;function J(R){return R instanceof this?R:f.resolve(new this(h),R)}v.reject=W;function W(R){var x=new this(h);return f.reject(x,R)}v.all=V;function V(R){var x=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=R.length,G=!1;if(!D)return this.resolve([]);for(var Z=new Array(D),ie=0,se=-1,le=new this(h);++se<D;)de(R[se],se);return le;function de(be,Te){x.resolve(be).then(je,function(ye){G||(G=!0,f.reject(le,ye))});function je(ye){Z[Te]=ye,++ie===D&&!G&&(G=!0,f.resolve(le,Z))}}}v.race=ue;function ue(R){var x=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=R.length,G=!1;if(!D)return this.resolve([]);for(var Z=-1,ie=new this(h);++Z<D;)se(R[Z]);return ie;function se(le){x.resolve(le).then(function(de){G||(G=!0,f.resolve(ie,de))},function(de){G||(G=!0,f.reject(ie,de))})}}},{1:1}],3:[function(r,i,l){(function(o){typeof o.Promise!="function"&&(o.Promise=r(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,i,l){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function h(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var y=f();function g(){try{if(!y||!y.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),a=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||a)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function _(n,a){n=n||[],a=a||{};try{return new Blob(n,a)}catch(d){if(d.name!=="TypeError")throw d;for(var s=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,u=new s,c=0;c<n.length;c+=1)u.append(n[c]);return u.getBlob(a.type)}}typeof Promise>"u"&&r(3);var v=Promise;function N(n,a){a&&n.then(function(s){a(null,s)},function(s){a(s)})}function L(n,a,s){typeof a=="function"&&n.then(a),typeof s=="function"&&n.catch(s)}function k(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function F(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var S="local-forage-detect-blob-support",J=void 0,W={},V=Object.prototype.toString,ue="readonly",R="readwrite";function x(n){for(var a=n.length,s=new ArrayBuffer(a),u=new Uint8Array(s),c=0;c<a;c++)u[c]=n.charCodeAt(c);return s}function D(n){return new v(function(a){var s=n.transaction(S,R),u=_([""]);s.objectStore(S).put(u,"key"),s.onabort=function(c){c.preventDefault(),c.stopPropagation(),a(!1)},s.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);a(d||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function G(n){return typeof J=="boolean"?v.resolve(J):D(n).then(function(a){return J=a,J})}function Z(n){var a=W[n.name],s={};s.promise=new v(function(u,c){s.resolve=u,s.reject=c}),a.deferredOperations.push(s),a.dbReady?a.dbReady=a.dbReady.then(function(){return s.promise}):a.dbReady=s.promise}function ie(n){var a=W[n.name],s=a.deferredOperations.pop();if(s)return s.resolve(),s.promise}function se(n,a){var s=W[n.name],u=s.deferredOperations.pop();if(u)return u.reject(a),u.promise}function le(n,a){return new v(function(s,u){if(W[n.name]=W[n.name]||$(),n.db)if(a)Z(n),n.db.close();else return s(n.db);var c=[n.name];a&&c.push(n.version);var d=y.open.apply(y,c);a&&(d.onupgradeneeded=function(m){var E=d.result;try{E.createObjectStore(n.storeName),m.oldVersion<=1&&E.createObjectStore(S)}catch(A){if(A.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+m.oldVersion+" to version "+m.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw A}}),d.onerror=function(m){m.preventDefault(),u(d.error)},d.onsuccess=function(){var m=d.result;m.onversionchange=function(E){E.target.close()},s(m),ie(n)}})}function de(n){return le(n,!1)}function be(n){return le(n,!0)}function Te(n,a){if(!n.db)return!0;var s=!n.db.objectStoreNames.contains(n.storeName),u=n.version<n.db.version,c=n.version>n.db.version;if(u&&(n.version!==a&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),c||s){if(s){var d=n.db.version+1;d>n.version&&(n.version=d)}return!0}return!1}function je(n){return new v(function(a,s){var u=new FileReader;u.onerror=s,u.onloadend=function(c){var d=btoa(c.target.result||"");a({__local_forage_encoded_blob:!0,data:d,type:n.type})},u.readAsBinaryString(n)})}function ye(n){var a=x(atob(n.data));return _([a],{type:n.type})}function p(n){return n&&n.__local_forage_encoded_blob}function I(n){var a=this,s=a._initReady().then(function(){var u=W[a._dbInfo.name];if(u&&u.dbReady)return u.dbReady});return L(s,n,n),s}function O(n){Z(n);for(var a=W[n.name],s=a.forages,u=0;u<s.length;u++){var c=s[u];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return n.db=null,de(n).then(function(d){return n.db=d,Te(n)?be(n):d}).then(function(d){n.db=a.db=d;for(var m=0;m<s.length;m++)s[m]._dbInfo.db=d}).catch(function(d){throw se(n,d),d})}function M(n,a,s,u){u===void 0&&(u=1);try{var c=n.db.transaction(n.storeName,a);s(null,c)}catch(d){if(u>0&&(!n.db||d.name==="InvalidStateError"||d.name==="NotFoundError"))return v.resolve().then(function(){if(!n.db||d.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),be(n)}).then(function(){return O(n).then(function(){M(n,a,s,u-1)})}).catch(s);s(d)}}function $(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(n){var a=this,s={db:null};if(n)for(var u in n)s[u]=n[u];var c=W[s.name];c||(c=$(),W[s.name]=c),c.forages.push(a),a._initReady||(a._initReady=a.ready,a.ready=I);var d=[];function m(){return v.resolve()}for(var E=0;E<c.forages.length;E++){var A=c.forages[E];A!==a&&d.push(A._initReady().catch(m))}var w=c.forages.slice(0);return v.all(d).then(function(){return s.db=c.db,de(s)}).then(function(b){return s.db=b,Te(s,a._defaultConfig.version)?be(s):b}).then(function(b){s.db=c.db=b,a._dbInfo=s;for(var T=0;T<w.length;T++){var j=w[T];j!==a&&(j._dbInfo.db=s.db,j._dbInfo.version=s.version)}})}function K(n,a){var s=this;n=k(n);var u=new v(function(c,d){s.ready().then(function(){M(s._dbInfo,ue,function(m,E){if(m)return d(m);try{var A=E.objectStore(s._dbInfo.storeName),w=A.get(n);w.onsuccess=function(){var b=w.result;b===void 0&&(b=null),p(b)&&(b=ye(b)),c(b)},w.onerror=function(){d(w.error)}}catch(b){d(b)}})}).catch(d)});return N(u,a),u}function re(n,a){var s=this,u=new v(function(c,d){s.ready().then(function(){M(s._dbInfo,ue,function(m,E){if(m)return d(m);try{var A=E.objectStore(s._dbInfo.storeName),w=A.openCursor(),b=1;w.onsuccess=function(){var T=w.result;if(T){var j=T.value;p(j)&&(j=ye(j));var z=n(j,T.key,b++);z!==void 0?c(z):T.continue()}else c()},w.onerror=function(){d(w.error)}}catch(T){d(T)}})}).catch(d)});return N(u,a),u}function $e(n,a,s){var u=this;n=k(n);var c=new v(function(d,m){var E;u.ready().then(function(){return E=u._dbInfo,V.call(a)==="[object Blob]"?G(E.db).then(function(A){return A?a:je(a)}):a}).then(function(A){M(u._dbInfo,R,function(w,b){if(w)return m(w);try{var T=b.objectStore(u._dbInfo.storeName);A===null&&(A=void 0);var j=T.put(A,n);b.oncomplete=function(){A===void 0&&(A=null),d(A)},b.onabort=b.onerror=function(){var z=j.error?j.error:j.transaction.error;m(z)}}catch(z){m(z)}})}).catch(m)});return N(c,s),c}function we(n,a){var s=this;n=k(n);var u=new v(function(c,d){s.ready().then(function(){M(s._dbInfo,R,function(m,E){if(m)return d(m);try{var A=E.objectStore(s._dbInfo.storeName),w=A.delete(n);E.oncomplete=function(){c()},E.onerror=function(){d(w.error)},E.onabort=function(){var b=w.error?w.error:w.transaction.error;d(b)}}catch(b){d(b)}})}).catch(d)});return N(u,a),u}function xe(n){var a=this,s=new v(function(u,c){a.ready().then(function(){M(a._dbInfo,R,function(d,m){if(d)return c(d);try{var E=m.objectStore(a._dbInfo.storeName),A=E.clear();m.oncomplete=function(){u()},m.onabort=m.onerror=function(){var w=A.error?A.error:A.transaction.error;c(w)}}catch(w){c(w)}})}).catch(c)});return N(s,n),s}function Zr(n){var a=this,s=new v(function(u,c){a.ready().then(function(){M(a._dbInfo,ue,function(d,m){if(d)return c(d);try{var E=m.objectStore(a._dbInfo.storeName),A=E.count();A.onsuccess=function(){u(A.result)},A.onerror=function(){c(A.error)}}catch(w){c(w)}})}).catch(c)});return N(s,n),s}function en(n,a){var s=this,u=new v(function(c,d){if(n<0){c(null);return}s.ready().then(function(){M(s._dbInfo,ue,function(m,E){if(m)return d(m);try{var A=E.objectStore(s._dbInfo.storeName),w=!1,b=A.openKeyCursor();b.onsuccess=function(){var T=b.result;if(!T){c(null);return}n===0||w?c(T.key):(w=!0,T.advance(n))},b.onerror=function(){d(b.error)}}catch(T){d(T)}})}).catch(d)});return N(u,a),u}function tn(n){var a=this,s=new v(function(u,c){a.ready().then(function(){M(a._dbInfo,ue,function(d,m){if(d)return c(d);try{var E=m.objectStore(a._dbInfo.storeName),A=E.openKeyCursor(),w=[];A.onsuccess=function(){var b=A.result;if(!b){u(w);return}w.push(b.key),b.continue()},A.onerror=function(){c(A.error)}}catch(b){c(b)}})}).catch(c)});return N(s,n),s}function rn(n,a){a=F.apply(this,arguments);var s=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||s.name,n.storeName=n.storeName||s.storeName);var u=this,c;if(!n.name)c=v.reject("Invalid arguments");else{var d=n.name===s.name&&u._dbInfo.db,m=d?v.resolve(u._dbInfo.db):de(n).then(function(E){var A=W[n.name],w=A.forages;A.db=E;for(var b=0;b<w.length;b++)w[b]._dbInfo.db=E;return E});n.storeName?c=m.then(function(E){if(E.objectStoreNames.contains(n.storeName)){var A=E.version+1;Z(n);var w=W[n.name],b=w.forages;E.close();for(var T=0;T<b.length;T++){var j=b[T];j._dbInfo.db=null,j._dbInfo.version=A}var z=new v(function(B,Q){var X=y.open(n.name,A);X.onerror=function(ce){var wt=X.result;wt.close(),Q(ce)},X.onupgradeneeded=function(){var ce=X.result;ce.deleteObjectStore(n.storeName)},X.onsuccess=function(){var ce=X.result;ce.close(),B(ce)}});return z.then(function(B){w.db=B;for(var Q=0;Q<b.length;Q++){var X=b[Q];X._dbInfo.db=B,ie(X._dbInfo)}}).catch(function(B){throw(se(n,B)||v.resolve()).catch(function(){}),B})}}):c=m.then(function(E){Z(n);var A=W[n.name],w=A.forages;E.close();for(var b=0;b<w.length;b++){var T=w[b];T._dbInfo.db=null}var j=new v(function(z,B){var Q=y.deleteDatabase(n.name);Q.onerror=function(){var X=Q.result;X&&X.close(),B(Q.error)},Q.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},Q.onsuccess=function(){var X=Q.result;X&&X.close(),z(X)}});return j.then(function(z){A.db=z;for(var B=0;B<w.length;B++){var Q=w[B];ie(Q._dbInfo)}}).catch(function(z){throw(se(n,z)||v.resolve()).catch(function(){}),z})})}return N(c,a),c}var nn={_driver:"asyncStorage",_initStorage:P,_support:g(),iterate:re,getItem:K,setItem:$e,removeItem:we,clear:xe,length:Zr,key:en,keys:tn,dropInstance:rn};function on(){return typeof openDatabase=="function"}var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",an="~~local_forage_type~",Gt=/^~~local_forage_type~([^~]+)~/,Qe="__lfsc__:",mt=Qe.length,yt="arbf",gt="blob",Bt="si08",qt="ui08",Wt="uic8",Vt="si16",zt="si32",Ht="ur16",Kt="ui32",Xt="fl32",Yt="fl64",Jt=mt+yt.length,Qt=Object.prototype.toString;function Zt(n){var a=n.length*.75,s=n.length,u,c=0,d,m,E,A;n[n.length-1]==="="&&(a--,n[n.length-2]==="="&&a--);var w=new ArrayBuffer(a),b=new Uint8Array(w);for(u=0;u<s;u+=4)d=ge.indexOf(n[u]),m=ge.indexOf(n[u+1]),E=ge.indexOf(n[u+2]),A=ge.indexOf(n[u+3]),b[c++]=d<<2|m>>4,b[c++]=(m&15)<<4|E>>2,b[c++]=(E&3)<<6|A&63;return w}function Et(n){var a=new Uint8Array(n),s="",u;for(u=0;u<a.length;u+=3)s+=ge[a[u]>>2],s+=ge[(a[u]&3)<<4|a[u+1]>>4],s+=ge[(a[u+1]&15)<<2|a[u+2]>>6],s+=ge[a[u+2]&63];return a.length%3===2?s=s.substring(0,s.length-1)+"=":a.length%3===1&&(s=s.substring(0,s.length-2)+"=="),s}function sn(n,a){var s="";if(n&&(s=Qt.call(n)),n&&(s==="[object ArrayBuffer]"||n.buffer&&Qt.call(n.buffer)==="[object ArrayBuffer]")){var u,c=Qe;n instanceof ArrayBuffer?(u=n,c+=yt):(u=n.buffer,s==="[object Int8Array]"?c+=Bt:s==="[object Uint8Array]"?c+=qt:s==="[object Uint8ClampedArray]"?c+=Wt:s==="[object Int16Array]"?c+=Vt:s==="[object Uint16Array]"?c+=Ht:s==="[object Int32Array]"?c+=zt:s==="[object Uint32Array]"?c+=Kt:s==="[object Float32Array]"?c+=Xt:s==="[object Float64Array]"?c+=Yt:a(new Error("Failed to get type for BinaryArray"))),a(c+Et(u))}else if(s==="[object Blob]"){var d=new FileReader;d.onload=function(){var m=an+n.type+"~"+Et(this.result);a(Qe+gt+m)},d.readAsArrayBuffer(n)}else try{a(JSON.stringify(n))}catch(m){console.error("Couldn't convert value into a JSON string: ",n),a(null,m)}}function ln(n){if(n.substring(0,mt)!==Qe)return JSON.parse(n);var a=n.substring(Jt),s=n.substring(mt,Jt),u;if(s===gt&&Gt.test(a)){var c=a.match(Gt);u=c[1],a=a.substring(c[0].length)}var d=Zt(a);switch(s){case yt:return d;case gt:return _([d],{type:u});case Bt:return new Int8Array(d);case qt:return new Uint8Array(d);case Wt:return new Uint8ClampedArray(d);case Vt:return new Int16Array(d);case Ht:return new Uint16Array(d);case zt:return new Int32Array(d);case Kt:return new Uint32Array(d);case Xt:return new Float32Array(d);case Yt:return new Float64Array(d);default:throw new Error("Unkown type: "+s)}}var _t={serialize:sn,deserialize:ln,stringToBuffer:Zt,bufferToString:Et};function er(n,a,s,u){n.executeSql("CREATE TABLE IF NOT EXISTS "+a.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],s,u)}function cn(n){var a=this,s={db:null};if(n)for(var u in n)s[u]=typeof n[u]!="string"?n[u].toString():n[u];var c=new v(function(d,m){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(E){return m(E)}s.db.transaction(function(E){er(E,s,function(){a._dbInfo=s,d()},function(A,w){m(w)})},m)});return s.serializer=_t,c}function Ee(n,a,s,u,c,d){n.executeSql(s,u,c,function(m,E){E.code===E.SYNTAX_ERR?m.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[a.storeName],function(A,w){w.rows.length?d(A,E):er(A,a,function(){A.executeSql(s,u,c,d)},d)},d):d(m,E)},d)}function un(n,a){var s=this;n=k(n);var u=new v(function(c,d){s.ready().then(function(){var m=s._dbInfo;m.db.transaction(function(E){Ee(E,m,"SELECT * FROM "+m.storeName+" WHERE key = ? LIMIT 1",[n],function(A,w){var b=w.rows.length?w.rows.item(0).value:null;b&&(b=m.serializer.deserialize(b)),c(b)},function(A,w){d(w)})})}).catch(d)});return N(u,a),u}function dn(n,a){var s=this,u=new v(function(c,d){s.ready().then(function(){var m=s._dbInfo;m.db.transaction(function(E){Ee(E,m,"SELECT * FROM "+m.storeName,[],function(A,w){for(var b=w.rows,T=b.length,j=0;j<T;j++){var z=b.item(j),B=z.value;if(B&&(B=m.serializer.deserialize(B)),B=n(B,z.key,j+1),B!==void 0){c(B);return}}c()},function(A,w){d(w)})})}).catch(d)});return N(u,a),u}function tr(n,a,s,u){var c=this;n=k(n);var d=new v(function(m,E){c.ready().then(function(){a===void 0&&(a=null);var A=a,w=c._dbInfo;w.serializer.serialize(a,function(b,T){T?E(T):w.db.transaction(function(j){Ee(j,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[n,b],function(){m(A)},function(z,B){E(B)})},function(j){if(j.code===j.QUOTA_ERR){if(u>0){m(tr.apply(c,[n,A,s,u-1]));return}E(j)}})})}).catch(E)});return N(d,s),d}function fn(n,a,s){return tr.apply(this,[n,a,s,1])}function hn(n,a){var s=this;n=k(n);var u=new v(function(c,d){s.ready().then(function(){var m=s._dbInfo;m.db.transaction(function(E){Ee(E,m,"DELETE FROM "+m.storeName+" WHERE key = ?",[n],function(){c()},function(A,w){d(w)})})}).catch(d)});return N(u,a),u}function pn(n){var a=this,s=new v(function(u,c){a.ready().then(function(){var d=a._dbInfo;d.db.transaction(function(m){Ee(m,d,"DELETE FROM "+d.storeName,[],function(){u()},function(E,A){c(A)})})}).catch(c)});return N(s,n),s}function vn(n){var a=this,s=new v(function(u,c){a.ready().then(function(){var d=a._dbInfo;d.db.transaction(function(m){Ee(m,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(E,A){var w=A.rows.item(0).c;u(w)},function(E,A){c(A)})})}).catch(c)});return N(s,n),s}function mn(n,a){var s=this,u=new v(function(c,d){s.ready().then(function(){var m=s._dbInfo;m.db.transaction(function(E){Ee(E,m,"SELECT key FROM "+m.storeName+" WHERE id = ? LIMIT 1",[n+1],function(A,w){var b=w.rows.length?w.rows.item(0).key:null;c(b)},function(A,w){d(w)})})}).catch(d)});return N(u,a),u}function yn(n){var a=this,s=new v(function(u,c){a.ready().then(function(){var d=a._dbInfo;d.db.transaction(function(m){Ee(m,d,"SELECT key FROM "+d.storeName,[],function(E,A){for(var w=[],b=0;b<A.rows.length;b++)w.push(A.rows.item(b).key);u(w)},function(E,A){c(A)})})}).catch(c)});return N(s,n),s}function gn(n){return new v(function(a,s){n.transaction(function(u){u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,d){for(var m=[],E=0;E<d.rows.length;E++)m.push(d.rows.item(E).name);a({db:n,storeNames:m})},function(c,d){s(d)})},function(u){s(u)})})}function En(n,a){a=F.apply(this,arguments);var s=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||s.name,n.storeName=n.storeName||s.storeName);var u=this,c;return n.name?c=new v(function(d){var m;n.name===s.name?m=u._dbInfo.db:m=openDatabase(n.name,"","",0),n.storeName?d({db:m,storeNames:[n.storeName]}):d(gn(m))}).then(function(d){return new v(function(m,E){d.db.transaction(function(A){function w(z){return new v(function(B,Q){A.executeSql("DROP TABLE IF EXISTS "+z,[],function(){B()},function(X,ce){Q(ce)})})}for(var b=[],T=0,j=d.storeNames.length;T<j;T++)b.push(w(d.storeNames[T]));v.all(b).then(function(){m()}).catch(function(z){E(z)})},function(A){E(A)})})}):c=v.reject("Invalid arguments"),N(c,a),c}var _n={_driver:"webSQLStorage",_initStorage:cn,_support:on(),iterate:dn,getItem:un,setItem:fn,removeItem:hn,clear:pn,length:vn,key:mn,keys:yn,dropInstance:En};function In(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function rr(n,a){var s=n.name+"/";return n.storeName!==a.storeName&&(s+=n.storeName+"/"),s}function bn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function wn(){return!bn()||localStorage.length>0}function An(n){var a=this,s={};if(n)for(var u in n)s[u]=n[u];return s.keyPrefix=rr(n,a._defaultConfig),wn()?(a._dbInfo=s,s.serializer=_t,v.resolve()):v.reject()}function Rn(n){var a=this,s=a.ready().then(function(){for(var u=a._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var d=localStorage.key(c);d.indexOf(u)===0&&localStorage.removeItem(d)}});return N(s,n),s}function On(n,a){var s=this;n=k(n);var u=s.ready().then(function(){var c=s._dbInfo,d=localStorage.getItem(c.keyPrefix+n);return d&&(d=c.serializer.deserialize(d)),d});return N(u,a),u}function Nn(n,a){var s=this,u=s.ready().then(function(){for(var c=s._dbInfo,d=c.keyPrefix,m=d.length,E=localStorage.length,A=1,w=0;w<E;w++){var b=localStorage.key(w);if(b.indexOf(d)===0){var T=localStorage.getItem(b);if(T&&(T=c.serializer.deserialize(T)),T=n(T,b.substring(m),A++),T!==void 0)return T}}});return N(u,a),u}function Sn(n,a){var s=this,u=s.ready().then(function(){var c=s._dbInfo,d;try{d=localStorage.key(n)}catch{d=null}return d&&(d=d.substring(c.keyPrefix.length)),d});return N(u,a),u}function Mn(n){var a=this,s=a.ready().then(function(){for(var u=a._dbInfo,c=localStorage.length,d=[],m=0;m<c;m++){var E=localStorage.key(m);E.indexOf(u.keyPrefix)===0&&d.push(E.substring(u.keyPrefix.length))}return d});return N(s,n),s}function Tn(n){var a=this,s=a.keys().then(function(u){return u.length});return N(s,n),s}function $n(n,a){var s=this;n=k(n);var u=s.ready().then(function(){var c=s._dbInfo;localStorage.removeItem(c.keyPrefix+n)});return N(u,a),u}function Cn(n,a,s){var u=this;n=k(n);var c=u.ready().then(function(){a===void 0&&(a=null);var d=a;return new v(function(m,E){var A=u._dbInfo;A.serializer.serialize(a,function(w,b){if(b)E(b);else try{localStorage.setItem(A.keyPrefix+n,w),m(d)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&E(T),E(T)}})})});return N(c,s),c}function Ln(n,a){if(a=F.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var s=this.config();n.name=n.name||s.name,n.storeName=n.storeName||s.storeName}var u=this,c;return n.name?c=new v(function(d){n.storeName?d(rr(n,u._defaultConfig)):d(n.name+"/")}).then(function(d){for(var m=localStorage.length-1;m>=0;m--){var E=localStorage.key(m);E.indexOf(d)===0&&localStorage.removeItem(E)}}):c=v.reject("Invalid arguments"),N(c,a),c}var kn={_driver:"localStorageWrapper",_initStorage:An,_support:In(),iterate:Nn,getItem:On,setItem:Cn,removeItem:$n,clear:Rn,length:Tn,key:Sn,keys:Mn,dropInstance:Ln},Pn=function(n,a){return n===a||typeof n=="number"&&typeof a=="number"&&isNaN(n)&&isNaN(a)},Dn=function(n,a){for(var s=n.length,u=0;u<s;){if(Pn(n[u],a))return!0;u++}return!1},nr=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},Fe={},ir={},Ce={INDEXEDDB:nn,WEBSQL:_n,LOCALSTORAGE:kn},Un=[Ce.INDEXEDDB._driver,Ce.WEBSQL._driver,Ce.LOCALSTORAGE._driver],Ze=["dropInstance"],It=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ze),jn={description:"",driver:Un.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function xn(n,a){n[a]=function(){var s=arguments;return n.ready().then(function(){return n[a].apply(n,s)})}}function bt(){for(var n=1;n<arguments.length;n++){var a=arguments[n];if(a)for(var s in a)a.hasOwnProperty(s)&&(nr(a[s])?arguments[0][s]=a[s].slice():arguments[0][s]=a[s])}return arguments[0]}var Fn=function(){function n(a){h(this,n);for(var s in Ce)if(Ce.hasOwnProperty(s)){var u=Ce[s],c=u._driver;this[s]=c,Fe[c]||this.defineDriver(u)}this._defaultConfig=bt({},jn),this._config=bt({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(a){if((typeof a>"u"?"undefined":o(a))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var s in a){if(s==="storeName"&&(a[s]=a[s].replace(/\W/g,"_")),s==="version"&&typeof a[s]!="number")return new Error("Database version must be a number.");this._config[s]=a[s]}return"driver"in a&&a.driver?this.setDriver(this._config.driver):!0}else return typeof a=="string"?this._config[a]:this._config},n.prototype.defineDriver=function(a,s,u){var c=new v(function(d,m){try{var E=a._driver,A=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver){m(A);return}for(var w=It.concat("_initStorage"),b=0,T=w.length;b<T;b++){var j=w[b],z=!Dn(Ze,j);if((z||a[j])&&typeof a[j]!="function"){m(A);return}}var B=function(){for(var X=function(Bn){return function(){var qn=new Error("Method "+Bn+" is not implemented by the current driver"),or=v.reject(qn);return N(or,arguments[arguments.length-1]),or}},ce=0,wt=Ze.length;ce<wt;ce++){var At=Ze[ce];a[At]||(a[At]=X(At))}};B();var Q=function(X){Fe[E]&&console.info("Redefining LocalForage driver: "+E),Fe[E]=a,ir[E]=X,d()};"_support"in a?a._support&&typeof a._support=="function"?a._support().then(Q,m):Q(!!a._support):Q(!0)}catch(X){m(X)}});return L(c,s,u),c},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(a,s,u){var c=Fe[a]?v.resolve(Fe[a]):v.reject(new Error("Driver not found."));return L(c,s,u),c},n.prototype.getSerializer=function(a){var s=v.resolve(_t);return L(s,a),s},n.prototype.ready=function(a){var s=this,u=s._driverSet.then(function(){return s._ready===null&&(s._ready=s._initDriver()),s._ready});return L(u,a,a),u},n.prototype.setDriver=function(a,s,u){var c=this;nr(a)||(a=[a]);var d=this._getSupportedDrivers(a);function m(){c._config.driver=c.driver()}function E(b){return c._extend(b),m(),c._ready=c._initStorage(c._config),c._ready}function A(b){return function(){var T=0;function j(){for(;T<b.length;){var z=b[T];return T++,c._dbInfo=null,c._ready=null,c.getDriver(z).then(E).catch(j)}m();var B=new Error("No available storage method found.");return c._driverSet=v.reject(B),c._driverSet}return j()}}var w=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=w.then(function(){var b=d[0];return c._dbInfo=null,c._ready=null,c.getDriver(b).then(function(T){c._driver=T._driver,m(),c._wrapLibraryMethodsWithReady(),c._initDriver=A(d)})}).catch(function(){m();var b=new Error("No available storage method found.");return c._driverSet=v.reject(b),c._driverSet}),L(this._driverSet,s,u),this._driverSet},n.prototype.supports=function(a){return!!ir[a]},n.prototype._extend=function(a){bt(this,a)},n.prototype._getSupportedDrivers=function(a){for(var s=[],u=0,c=a.length;u<c;u++){var d=a[u];this.supports(d)&&s.push(d)}return s},n.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,s=It.length;a<s;a++)xn(this,It[a])},n.prototype.createInstance=function(a){return new n(a)},n}(),Gn=new Fn;i.exports=Gn},{3:3}]},{},[4])(4)})}),va=Yr((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],i):i(r.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(r){var i="localforage-driver-memory";function l(p){var I=typeof Symbol=="function"&&p[Symbol.iterator],O=0;return I?I.call(p):{next:function(){return p&&O>=p.length&&(p=void 0),{value:p&&p[O++],done:!p}}}}function o(p,I){p=p||[],I=I||{};try{return new Blob(p,I)}catch(P){if(P.name!=="TypeError")throw P;for(var O=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,M=new O,$=0;$<p.length;$+=1)M.append(p[$]);return M.getBlob(I.type)}}var h=/^~~local_forage_type~([^~]+)~/,f=9,y=f+4,g=Object.prototype.toString;function _(p){var I=p.length*.75,O=p.length;p[p.length-1]==="="&&(I--,p[p.length-2]==="="&&I--);for(var M=new ArrayBuffer(I),$=new Uint8Array(M),P=0,K=0;P<O;P+=4){var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P]),$e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P+1]),we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P+2]),xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(p[P+3]);$[K++]=re<<2|$e>>4,$[K++]=($e&15)<<4|we>>2,$[K++]=(we&3)<<6|xe&63}return M}function v(p){for(var I=new Uint8Array(p),O="",M=0;M<I.length;M+=3)O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[M]>>2],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[M]&3)<<4|I[M+1]>>4],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[M+1]&15)<<2|I[M+2]>>6],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[M+2]&63];return I.length%3===2?O=O.substring(0,O.length-1)+"=":I.length%3===1&&(O=O.substring(0,O.length-2)+"=="),O}function N(p,I){var O="";if(p&&(O=g.call(p)),p&&(O==="[object ArrayBuffer]"||p.buffer&&g.call(p.buffer)==="[object ArrayBuffer]")){var M=void 0,$="__lfsc__:";p instanceof ArrayBuffer?(M=p,$+="arbf"):(M=p.buffer,O==="[object Int8Array]"?$+="si08":O==="[object Uint8Array]"?$+="ui08":O==="[object Uint8ClampedArray]"?$+="uic8":O==="[object Int16Array]"?$+="si16":O==="[object Uint16Array]"?$+="ur16":O==="[object Int32Array]"?$+="si32":O==="[object Uint32Array]"?$+="ui32":O==="[object Float32Array]"?$+="fl32":O==="[object Float64Array]"?$+="fl64":I(new Error("Failed to get type for BinaryArray"))),I($+v(M))}else if(O==="[object Blob]"){var P=new FileReader;P.onload=function(){var K="~~local_forage_type~"+p.type+"~"+v(this.result);I("__lfsc__:blob"+K)},P.readAsArrayBuffer(p)}else try{I(JSON.stringify(p))}catch(K){console.error("Couldn't convert value into a JSON string: ",p),I(null,K)}}function L(p){if(p.substring(0,f)!=="__lfsc__:")return JSON.parse(p);var I=p.substring(y),O=p.substring(f,y),M;if(O==="blob"&&h.test(I)){var $=I.match(h);M=$[1],I=I.substring($[0].length)}var P=_(I);switch(O){case"arbf":return P;case"blob":return o([P],{type:M});case"si08":return new Int8Array(P);case"ui08":return new Uint8Array(P);case"uic8":return new Uint8ClampedArray(P);case"si16":return new Int16Array(P);case"ur16":return new Uint16Array(P);case"si32":return new Int32Array(P);case"ui32":return new Uint32Array(P);case"fl32":return new Float32Array(P);case"fl64":return new Float64Array(P);default:throw new Error("Unkown type: "+O)}}function k(p){var I,O;if(p===null||typeof p!="object"||"isActiveClone"in p)return p;var M=p instanceof Date?new Date(p):p.constructor();try{for(var $=l(Object.keys(p)),P=$.next();!P.done;P=$.next()){var K=P.value;Object.prototype.hasOwnProperty.call(p,K)&&(p.isActiveClone=null,M[K]=k(p[K]),delete p.isActiveClone)}}catch(re){I={error:re}}finally{try{P&&!P.done&&(O=$.return)&&O.call($)}finally{if(I)throw I.error}}return M}function F(p,I){return(p.name||I.name)+"/"+(p.storeName||I.storeName)+"/"}function S(p,I){I&&p.then(function(O){I(null,O)},function(O){I(O)})}function J(){for(var p=[],I=0;I<arguments.length;I++)p[I]=arguments[I];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function W(p,I){var O=this;if(I=J.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var M=this.config();p.name=p.name||M.name,p.storeName=p.storeName||M.storeName}var $;return p.name?$=new Promise(function(P){p.storeName?P(F(p,O._defaultConfig)):P(p.name+"/")}):$=Promise.reject("Invalid arguments"),{promise:$,callback:I}}function V(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}var ue={bufferToString:v,deserialize:L,serialize:N,stringToBuffer:_},R={},x=function(){function p(I){this.kp=I,this.data={}}return p.resolve=function(I){return R[I]||(R[I]=new p(I)),R[I]},p.prototype.clear=function(){this.data={}},p.prototype.drop=function(){this.clear(),delete R[this.kp]},p.prototype.get=function(I){return this.data[I]},p.prototype.key=function(I){return this.keys()[I]},p.prototype.keys=function(){return Object.keys(this.data)},p.prototype.rm=function(I){delete this.data[I]},p.prototype.set=function(I,O){this.data[I]=O},p}();function D(p){var I=p?k(p):{},O=F(I,this._defaultConfig),M=x.resolve(O);return this._dbInfo=I,this._dbInfo.serializer=ue,this._dbInfo.keyPrefix=O,this._dbInfo.mStore=M,Promise.resolve()}function G(p){var I=this,O=this.ready().then(function(){I._dbInfo.mStore.clear()});return S(O,p),O}function Z(p,I){var O=W.apply(this,arguments),M=O.promise,$=O.callback,P=M.then(function(K){x.resolve(K).drop()});return S(P,$),M}function ie(p,I){var O=this;p=V(p);var M=this.ready().then(function(){var $=O._dbInfo.mStore.get(p);return $==null?null:O._dbInfo.serializer.deserialize($)});return S(M,I),M}function se(p,I){var O=this,M=this.ready().then(function(){for(var $=O._dbInfo.mStore,P=$.keys(),K=0;K<P.length;K++){var re=$.get(P[K]);if(re&&(re=O._dbInfo.serializer.deserialize(re)),re=p(re,P[K],K+1),re!==void 0)return re}});return S(M,I),M}function le(p,I){var O=this,M=this.ready().then(function(){var $;try{$=O._dbInfo.mStore.key(p),$===void 0&&($=null)}catch{$=null}return $});return S(M,I),M}function de(p){var I=this,O=this.ready().then(function(){return I._dbInfo.mStore.keys()});return S(O,p),O}function be(p){var I=this.keys().then(function(O){return O.length});return S(I,p),I}function Te(p,I){var O=this;p=V(p);var M=this.ready().then(function(){O._dbInfo.mStore.rm(p)});return S(M,I),M}function je(p,I,O){var M=this;p=V(p);var $=this.ready().then(function(){I===void 0&&(I=null);var P=I;return new Promise(function(K,re){M._dbInfo.serializer.serialize(I,function($e,we){if(we)re(we);else try{M._dbInfo.mStore.set(p,$e),K(P)}catch(xe){re(xe)}})})});return S($,O),$}var ye=!0;r._support=ye,r._driver=i,r._initStorage=D,r.clear=G,r.dropInstance=Z,r.getItem=ie,r.iterate=se,r.key=le,r.keys=de,r.length=be,r.removeItem=Te,r.setItem=je,Object.defineProperty(r,"__esModule",{value:!0})})}),Nt=Jr(pa()),br=Jr(va()),ma={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function ya(e){for(let[t,r]of Object.entries(ma))e.style[t]=r}function ga(e){return!![].slice.call(document.querySelectorAll(".magic-iframe")).find(r=>r.src.includes(e))}var Ea=class extends sa{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let t=()=>{if(ga(encodeURIComponent(this.parameters)))_o().log();else{let r=document.createElement("iframe");r.classList.add("magic-iframe"),r.dataset.magicIframeLabel=ht(this.endpoint).host,r.title="Secure Modal",r.src=ht(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,r.allow="clipboard-read; clipboard-write",ya(r),document.body.appendChild(r),e(r)}};["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1)}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=(t=e.data.response)!=null?t:{};for(let r of this.messageHandlers.values())r(e)}})}showOverlay(){return lt(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return lt(this,null,function*(){var e;let t=yield this.iframe;t.style.display="none",(e=this.activeElement)!=null&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return lt(this,null,function*(){let t=yield this.iframe;if(t&&t.contentWindow)t.contentWindow.postMessage(e,this.endpoint);else throw Lr()})}},Ga=ho(Kr,{platform:"web",sdkName:"magic-sdk",version:"28.0.7",defaultEndpoint:"https://auth.magic.link/",ViewController:Ea,configureStorage:()=>lt(void 0,null,function*(){let e=Nt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(br),yield e.setDriver([Nt.default.INDEXEDDB,Nt.default.LOCALSTORAGE,br._driver]),e})}),_a=(e,t,r)=>new Promise((i,l)=>{var o=y=>{try{f(r.next(y))}catch(g){l(g)}},h=y=>{try{f(r.throw(y))}catch(g){l(g)}},f=y=>y.done?i(y.value):Promise.resolve(y.value).then(o,h);f((r=r.apply(e,t)).next())});function Ia(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function ba(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function wa(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function Aa(){return ba()||wa()}function wr(){return Ia()||Aa()}function Ra(){return typeof window<"u"&&window===window.top}var Oa=!0,Na="https://relay.farcaster.xyz",Ba=class extends _e.Internal{constructor(){super(),this.name="farcaster",this.config={},this.channel=null,this.login=t=>{var r;if(!this.channel)throw new Error("Channel not created yet.");let i=this.utils.createJsonRpcRequestPayload("farcaster_show_QR",[{data:{showUI:(r=t==null?void 0:t.showUI)!=null?r:Oa,domain:window.location.origin,isMobile:wr(),channel:this.channel}}]),l=this.request(i);return wr()&&Ra()&&(window.location.href=this.channel.url),l},_a(this,null,function*(){this.channel=yield fetch(`${Na}/v1/channel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:window.location.host,siweUri:window.location.origin})}).then(t=>t.json())})}},Sa=Object.defineProperty,Ma=Object.defineProperties,Ta=Object.getOwnPropertyDescriptors,Ar=Object.getOwnPropertySymbols,$a=Object.prototype.hasOwnProperty,Ca=Object.prototype.propertyIsEnumerable,Rr=(e,t,r)=>t in e?Sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,La=(e,t)=>{for(var r in t||(t={}))$a.call(t,r)&&Rr(e,r,t[r]);if(Ar)for(var r of Ar(t))Ca.call(t,r)&&Rr(e,r,t[r]);return e},ka=(e,t)=>Ma(e,Ta(t)),Qr=(e,t,r)=>new Promise((i,l)=>{var o=y=>{try{f(r.next(y))}catch(g){l(g)}},h=y=>{try{f(r.throw(y))}catch(g){l(g)}},f=y=>y.done?i(y.value):Promise.resolve(y.value).then(o,h);f((r=r.apply(e,t)).next())}),Pa=(e=>(e.Start="magic_oauth_login_with_redirect_start",e.Verify="magic_oauth_login_with_redirect_verify",e))(Pa||{}),Da=(e=>(e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidScope="invalid_scope",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedResponseType="unsupported_response_type",e.UnsupportedGrantType="unsupported_grant_type",e.UnsupportedTokenType="unsupported_token_type",e.AccessDenied="access_denied",e.ServerError="server_error",e.TemporarilyUnavailable="temporarily_unavailable",e))(Da||{}),Wa=class extends _e.Internal{constructor(){super(...arguments),this.name="oauth2",this.config={},this.compat={"magic-sdk":">=2.4.6","@magic-sdk/react-native":!1,"@magic-sdk/react-native-bare":!1,"@magic-sdk/react-native-expo":!1}}loginWithRedirect(e){return this.utils.createPromiEvent((t,r)=>Qr(this,null,function*(){var i;let l=this.utils.createJsonRpcRequestPayload("magic_oauth_login_with_redirect_start",[ka(La({},e),{apiKey:this.sdk.apiKey,platform:"web"})]),o=yield this.request(l),h=o,f=o;if(f.error&&r(this.createError(f.error,(i=f.error_description)!=null?i:"An error occurred.",{errorURI:f.error_uri,provider:f.provider})),h!=null&&h.oauthAuthoriationURI){let y=h.useMagicServerCallback?new URL(h.oauthAuthoriationURI,this.sdk.endpoint).href:h.oauthAuthoriationURI;e!=null&&e.shouldReturnURI?t(y):(window.location.href=y,t())}t()}))}getRedirectResult(e){let t=e||window.location.search,r=window.location.origin+window.location.pathname;return window.history.replaceState(null,"",r),Ua.call(this,t)}};function Ua(e){return this.utils.createPromiEvent((t,r)=>Qr(this,null,function*(){var i;let l=this.utils.createJsonRpcRequestPayload("magic_oauth_login_with_redirect_verify",[{authorizationResponseParams:e,magicApiKey:this.sdk.apiKey,platform:"web"}]),o=yield this.request(l),h=o,f=o;f.error&&r(this.createError(f.error,(i=f.error_description)!=null?i:"An error occurred.",{errorURI:f.error_uri,provider:f.provider})),t(h)}))}var St={SIGN_TRANSACTION:"sol_signTransaction",SIGN_MESSAGE:"sol_signMessage",PARTIAL_SIGN_TRANSACTION:"sol_partialSignTransaction"},Va=class extends _e.Internal{constructor(e){super(),this.solanaConfig=e,this.name="solana",this.config={},this.signTransaction=(t,r)=>this.request({id:42,jsonrpc:"2.0",method:St.SIGN_TRANSACTION,params:{type:t instanceof ar?"legacy":0,serialized:t.serialize(r),serializeConfig:r}}),this.signMessage=t=>this.request({id:42,jsonrpc:"2.0",method:St.SIGN_MESSAGE,params:{message:t}}),this.partialSignTransaction=(t,r)=>this.request({id:42,jsonrpc:"2.0",method:St.PARTIAL_SIGN_TRANSACTION,params:{type:t instanceof ar?"legacy":0,serialized:t.serialize(r),serializeConfig:r}}),this.config={rpcUrl:e.rpcUrl,chainType:"SOLANA"}}};export{Kn as N,Ae as O,Jn as S,pe as T,Xn as a,Ga as b,Yn as c,Ba as h,Va as s,Wa as v,he as y};
